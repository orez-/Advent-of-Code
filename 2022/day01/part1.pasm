PUSH 0 0 0 0
:TOP
MUL 10
INCHAR
DUP
SUB 10
NOT
JUMPIF NEW_LINE
SUB 48
ADD
JUMP TOP

:NEW_LINE
# Our read number ends up x10, but we happen to have a 10
# from the ascii newline. Divide to get our real number.
DIV
ADD
PUSH 0
INCHAR
DUP
NOT
JUMPIF DONE
ADD
DUP
SUB 10
NOT
JUMPIF MAX
SUB 48
JUMP TOP

:MAX
POP
DUP
ROLL 3 1
GREATER
JUMPIF MAX_GREATER
ROLL 2 1
:MAX_GREATER
POP
DUP
PUSH 0 0
JUMP TOP

:DONE
POP
DUP
ROLL 3 1
GREATER
JUMPIF MAX_GREATER2
ROLL 2 1
:MAX_GREATER2
POP
OUTNUM
